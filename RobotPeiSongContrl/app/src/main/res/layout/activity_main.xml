<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/bg_default"
    android:padding="0dp">

    <!-- 时间显示 -->
    <TextView
        android:id="@+id/tv_time"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="20dp"
        android:textColor="@color/black"
        android:textSize="24sp" />

    <!-- 主按钮容器 -->
    <LinearLayout
        android:id="@+id/button_container"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:gravity="center"
        android:orientation="horizontal">

        <Button
            android:id="@+id/btn_start_delivery"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="30dp"
            android:layout_marginBottom="30dp"
            android:background="@drawable/button_mint_green_rect"
            android:minWidth="150dp"
            android:minHeight="80dp"
            android:text="开始配送"
            android:textAllCaps="false"
            android:textSize="18sp" />

        <Button
            android:id="@+id/btn_patrol_mode"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="30dp"
            android:layout_marginBottom="30dp"
            android:background="@drawable/button_mint_green_rect"
            android:minWidth="150dp"
            android:minHeight="80dp"
            android:text="巡游模式"
            android:textAllCaps="false"
            android:textSize="18sp" />

        <Button
            android:id="@+id/btn_multi_delivery"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="30dp"
            android:background="@drawable/button_mint_green_rect"
            android:minWidth="150dp"
            android:minHeight="80dp"
            android:text="多点配送"
            android:textAllCaps="false"
            android:textSize="18sp" />

        <Button
            android:id="@+id/btn_follow_mode"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="30dp"
            android:background="@drawable/button_mint_green_rect"
            android:minWidth="150dp"
            android:minHeight="80dp"
            android:text="跟随模式"
            android:textAllCaps="false"
            android:textSize="18sp" />
    </LinearLayout>

    <!-- 设置按钮 -->
    <ImageButton
        android:id="@+id/btn_settings"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_alignParentTop="true"
        android:layout_alignParentEnd="true"
        android:background="?selectableItemBackgroundBorderless"
        android:src="@drawable/ic_settings" />

    <!-- 待机动画资源 -->
    <VideoView
        android:id="@+id/standby_animation"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentStart="true"
        android:layout_alignParentTop="true"
        android:layout_alignParentEnd="true"
        android:layout_alignParentBottom="true"
        android:contentDescription="待机动画视频"
        android:visibility="gone"
        android:scaleType="fitXY" />

    <!-- 基站选择指示器 -->
    <LinearLayout
        android:id="@+id/base_station_indicator"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="20dp"
        android:orientation="horizontal">

        <TextView
            android:id="@+id/tv_front_base"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:background="@drawable/indicator_gray"
            android:gravity="center"
            android:text="前"
            android:textColor="@color/white"
            android:textSize="12sp" />

        <TextView
            android:id="@+id/tv_rear_base"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:layout_marginLeft="10dp"
            android:background="@drawable/indicator_gray"
            android:gravity="center"
            android:text="后"
            android:textColor="@color/white"
            android:textSize="12sp" />

        <TextView
            android:id="@+id/tv_left_base"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:layout_marginLeft="10dp"
            android:background="@drawable/indicator_gray"
            android:gravity="center"
            android:text="左"
            android:textColor="@color/white"
            android:textSize="12sp" />

        <TextView
            android:id="@+id/tv_right_base"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:layout_marginLeft="10dp"
            android:background="@drawable/indicator_gray"
            android:gravity="center"
            android:text="右"
            android:textColor="@color/white"
            android:textSize="12sp" />
    </LinearLayout>

    <!-- 调试面板容器 -->
    <LinearLayout
        android:id="@+id/debug_container"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_above="@id/base_station_indicator"
        android:orientation="vertical"
        android:background="#80000000"
        android:layout_marginBottom="60dp"
        android:visibility="gone">

        <!-- 数据包统计 -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal">

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="数据包数量: "
                android:textColor="@color/white"/>

            <TextView
                android:id="@+id/tv_packet_count"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="0"
                android:textColor="@color/white"/>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="  频率: "
                android:textColor="@color/white"/>

            <TextView
                android:id="@+id/tv_packet_rate"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="0 Hz"
                android:textColor="@color/white"/>
        </LinearLayout>

        <!-- UWB数据 -->
        <TextView
            android:id="@+id/tv_uwb_data"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="UWB数据: 等待数据..."
            android:textColor="@color/white"/>

        <!-- 坐标系转换 -->
        <TextView
            android:id="@+id/tv_coord_transform"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="坐标系转换: 未计算"
            android:textColor="@color/white"/>

        <!-- 机器人位姿 -->
        <TextView
            android:id="@+id/tv_robot_pose"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="机器人位姿: 未获取"
            android:textColor="@color/white"/>

        <!-- 目标位置 -->
        <TextView
            android:id="@+id/tv_target_position"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="目标位置: 未计算"
            android:textColor="@color/white"/>

        <!-- 移动状态 -->
        <TextView
            android:id="@+id/tv_move_status"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="移动状态: 空闲"
            android:textColor="@color/white"/>

        <TextView
            android:id="@+id/tv_positioning_quality"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="定位质量：无"
            android:textColor="@color/white"/>

        <!-- 详细调试信息 -->
        <TextView
            android:id="@+id/tv_debug_info"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="调试信息..."
            android:textColor="@color/white"
            android:textSize="12sp"/>
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="4dp"
            android:background="#40000000">

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="基站数据"
                android:textColor="#4FC3F7"
                android:textSize="16sp"
                android:paddingBottom="4dp"/>

            <!-- 基站数据表格 -->
            <TableLayout
                android:id="@+id/base_station_table"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:stretchColumns="*"
                android:shrinkColumns="*">

                <!-- 表头 -->
                <TableRow
                    android:background="#1A4FC3F7"
                    android:padding="2dp">

                    <TextView
                        android:text="位置"
                        android:textColor="#E1F5FE"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:text="距离"
                        android:textColor="#E1F5FE"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:text="方位角"
                        android:textColor="#E1F5FE"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:text="仰角"
                        android:textColor="#E1F5FE"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:text="状态"
                        android:textColor="#E1F5FE"
                        android:gravity="center"
                        android:padding="4dp"/>
                </TableRow>

                <!-- 前方基站 -->
                <TableRow android:id="@+id/row_front_base">
                    <TextView
                        android:id="@+id/cell_front_label"
                        android:text="前方"
                        android:textColor="#FFFFFF"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:id="@+id/cell_front_distance"
                        android:text="--"
                        android:textColor="#FFFFFF"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:id="@+id/cell_front_azimuth"
                        android:text="--"
                        android:textColor="#FFFFFF"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:id="@+id/cell_front_elevation"
                        android:text="--"
                        android:textColor="#FFFFFF"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:id="@+id/cell_front_status"
                        android:text="离线"
                        android:textColor="#FF5252"
                        android:gravity="center"
                        android:padding="4dp"/>
                </TableRow>

                <!-- 后方基站 -->
                <TableRow android:id="@+id/row_rear_base">
                    <TextView
                        android:id="@+id/cell_rear_label"
                        android:text="后方"
                        android:textColor="#FFFFFF"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:id="@+id/cell_rear_distance"
                        android:text="--"
                        android:textColor="#FFFFFF"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:id="@+id/cell_rear_azimuth"
                        android:text="--"
                        android:textColor="#FFFFFF"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:id="@+id/cell_rear_elevation"
                        android:text="--"
                        android:textColor="#FFFFFF"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:id="@+id/cell_rear_status"
                        android:text="离线"
                        android:textColor="#FF5252"
                        android:gravity="center"
                        android:padding="4dp"/>
                </TableRow>

                <!-- 左侧基站 -->
                <TableRow android:id="@+id/row_left_base">
                    <TextView
                        android:id="@+id/cell_left_label"
                        android:text="左侧"
                        android:textColor="#FFFFFF"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:id="@+id/cell_left_distance"
                        android:text="--"
                        android:textColor="#FFFFFF"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:id="@+id/cell_left_azimuth"
                        android:text="--"
                        android:textColor="#FFFFFF"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:id="@+id/cell_left_elevation"
                        android:text="--"
                        android:textColor="#FFFFFF"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:id="@+id/cell_left_status"
                        android:text="离线"
                        android:textColor="#FF5252"
                        android:gravity="center"
                        android:padding="4dp"/>
                </TableRow>

                <!-- 右侧基站 -->
                <TableRow android:id="@+id/row_right_base">
                    <TextView
                        android:id="@+id/cell_right_label"
                        android:text="右侧"
                        android:textColor="#FFFFFF"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:id="@+id/cell_right_distance"
                        android:text="--"
                        android:textColor="#FFFFFF"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:id="@+id/cell_right_azimuth"
                        android:text="--"
                        android:textColor="#FFFFFF"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:id="@+id/cell_right_elevation"
                        android:text="--"
                        android:textColor="#FFFFFF"
                        android:gravity="center"
                        android:padding="4dp"/>

                    <TextView
                        android:id="@+id/cell_right_status"
                        android:text="离线"
                        android:textColor="#FF5252"
                        android:gravity="center"
                        android:padding="4dp"/>
                </TableRow>
            </TableLayout>
        </LinearLayout>

        <!-- 调试面板控制按钮 -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:gravity="center">

            <Button
                android:id="@+id/btn_toggle_debug"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="隐藏监控面板"
                android:layout_margin="4dp"/>

            <Button
                android:id="@+id/btn_clear_logs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="清除日志"
                android:layout_margin="4dp"/>
        </LinearLayout>
    </LinearLayout>
</RelativeLayout>
